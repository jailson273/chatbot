{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"db0b1003-9e47-4571-b399-d4aff9ccbd62","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:141618"}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"],"$$hashKey":"object:141665"}],"$connId":"con_3","$invalid":false,"$$hashKey":"object:141646"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$position":{"top":"0px","left":"766px"},"$title":"Início","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"30bf4872-7a04-46ad-92ee-a63241d0fb95","type":"text/plain"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$connId":"con_8","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$position":{"top":"0px","left":"1563px"},"$title":"Exceções","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"18d1398d-ef32-44aa-9ca3-4096d9b21b13","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:124158"}],"$conditionOutputs":[{"stateId":"1f5ffe7e-bd0b-4337-8879-aa56acf001bd","$connId":"con_13","conditions":[{"source":"context","comparison":"contains","values":["sim"],"$$hashKey":"object:153280","variable":"analise"}],"$invalid":false,"$$hashKey":"object:153271"},{"stateId":"05d58559-79b6-47ad-b2b6-8e3a9a793bf6","$connId":"con_18","conditions":[{"source":"context","comparison":"contains","values":["nao","não"],"$$hashKey":"object:153304","variable":"analise"}],"$invalid":false,"$$hashKey":"object:153296"}],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"Executar script","$invalid":false,"settings":{"function":"run","source":"function run(input){\n\n    function removerAcentos(newStringComAcento) {\n        var string = newStringComAcento;\n          var mapaAcentosHex \t= {\n              a : /[\\xE0-\\xE6]/g,\n              e : /[\\xE8-\\xEB]/g,\n              i : /[\\xEC-\\xEF]/g,\n              o : /[\\xF2-\\xF6]/g,\n              u : /[\\xF9-\\xFC]/g,\n              c : /\\xE7/g,\n              n : /\\xF1/g\n          };\n      \n          for ( var letra in mapaAcentosHex ) {\n              var expressaoRegular = mapaAcentosHex[letra];\n              string = string.replace( expressaoRegular, letra );\n          }\n     \n          return string;\n      }\n\n    entrada = removerAcentos(input).toLowerCase();\n\n\n    var avore_cenario = [\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS = 0 / GRAVE NAO\",\n            \"cenario\": \"A1\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS = 0 / GRAVE SIM\",\n            \"cenario\": \"A2\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS <= 3 / GRAVE NAO\",\n            \"cenario\": \"A3\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS <= 3 / GRAVE SIM\",\n            \"cenario\": \"A4\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS > 3 / GRAVE NAO\",\n            \"cenario\": \"A5\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE NAO / SINTOMAS > 3 / GRAVE SIM\",\n            \"cenario\": \"A6\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS = 0 / GRAVE NAO\",\n            \"cenario\": \"A7\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS = 0 / GRAVE SIM\",\n            \"cenario\": \"A8\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS <= 3 / GRAVE NAO\",\n            \"cenario\": \"A9\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS <= 3 / GRAVE SIM\",\n            \"cenario\": \"A10\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS > 3 / GRAVE NAO\",\n            \"cenario\": \"A11\",\n            \"risco\": \"nao\"\n        },\n    \n        {\n            \"sintoma\": \"GRUPO RISCO NAO / FEBRE SIM / SINTOMAS > 3 / GRAVE SIM\",\n            \"cenario\": \"A12\",\n            \"risco\": \"nao\"\n        },\n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS = 0 / GRAVE NAO\",\n            \"cenario\": \"B1\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS = 0 / GRAVE SIM\",\n            \"cenario\": \"B2\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS <= 3 / GRAVE NAO\",\n            \"cenario\": \"B3\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS <= 3 / GRAVE SIM\",\n            \"cenario\": \"B4\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS > 3 / GRAVE NAO\",\n            \"cenario\": \"B5\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE NAO / SINTOMAS > 3 / GRAVE SIM\",\n            \"cenario\": \"B6\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS = 0 / GRAVE NAO\",\n            \"cenario\": \"B7\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS = 0 / GRAVE SIM\",\n            \"cenario\": \"B8\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS <= 3 / GRAVE NAO\",\n            \"cenario\": \"B9\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS <= 3 / GRAVE SIM\",\n            \"cenario\": \"B10\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS > 3 / GRAVE NAO\",\n            \"cenario\": \"B11\",\n            \"risco\": \"sim\"\n        },\n        \n        {\n            \"sintoma\": \"GRUPO RISCO SIM / FEBRE SIM / SINTOMAS > 3 / GRAVE SIM\",\n            \"cenario\": \"B12\",\n            \"risco\": \"sim\"\n        }\n        \n    ]\n\n    var numeros = [\n\n        { numero: 0, sinonimos: [\"0\", \"zero\"] },\n        { numero: 1, sinonimos: [\"1\", \"um\",  \"uma\", \"one\"] },\n        { numero: 2, sinonimos: [\"2\", \"dois\", \"duas\", \"two\"] },\n        { numero: 3, sinonimos: [\"3\", \"tres\", \"trez\", \"three\"] },\n        { numero: 4, sinonimos: [\"4\", \"quatro\", \"four\"] },\n        { numero: 5, sinonimos: [\"5\", \"cinco\", \"sinco\", \"five\"] },\n        { numero: 6, sinonimos: [\"6\", \"seis\", \"six\"] },\n        { numero: 7, sinonimos: [\"7\", \"sete\", \"seven\"] },\n        { numero: 8, sinonimos: [\"8\", \"oito\", \"eight\"] },\n        { numero: 9, sinonimos: [\"9\", \"nove\", \"nine\"] }\n    ]\n\n    var arr = entrada.split(' / ');\n\n    var num =  '';\n\n    numeros.forEach(nu => {\n\n        nu.sinonimos.forEach(n => {\n\n            return arr.forEach(a => {\n                if(a.indexOf(n) >= 0)\n                    num = nu.numero;\n            })\n        })\n\n    })\n\n    var sintomas = '';\n\n    if(num == 0){\n        sintomas =  'sintomas = 0'\n    }\n    else if(num <= 3){\n        sintomas =  'sintomas <= 3'\n    }\n    else if(num > 3){\n        sintomas =  'sintomas > 3'\n    }\n    else {\n        sintomas = 'sintomas = 0'\n    }\n\n    var result = (`${arr[0]} / ${arr[1]} / ${sintomas} / ${arr[3]}`).toUpperCase()\n\n\n    var cenario = avore_cenario.find(ac => ac.sintoma == result);\n\n\n   var analise = `${cenario.risco} - ${cenario.cenario}`;\n\n   return analise\n}\n","inputVariables":["input.content"],"outputVariable":"analise"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"welcome","$position":{"top":"231px","left":"766px"},"$title":"Analise","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"77f26ab3-888c-4bf7-8bd9-4fe99eb2e03f","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:95265"}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{input.content}}"},"address":"Covid-Bot-FAQ-01-05"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"error","$position":{"top":"127px","left":"1563px"},"$title":"FAQ","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"05d58559-79b6-47ad-b2b6-8e3a9a793bf6":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"966fc17c-1348-4eb4-90b6-d9311efdb7e0","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:127903","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{analise}}"},"address":"Covid-Bot-PD-ResForGruRi-03-04"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF961E","label":"Servico","id":"blip-tag-3da89682-f955-f929-de17-ffa9bbaf58d4","canChangeBackground":false}],"id":"05d58559-79b6-47ad-b2b6-8e3a9a793bf6","root":false,"$title":"Grupo de Risco NAO Pre Diagnostico (Servico)","$position":{"top":"336px","left":"450px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1f5ffe7e-bd0b-4337-8879-aa56acf001bd":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"966fc17c-1348-4eb4-90b6-d9311efdb7e0","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:129357"}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{analise}}"},"address":"Covid-Bot-PD-ResDenGruRi-03-05"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF961E","label":"Servico","id":"blip-tag-3da89682-f955-f929-de17-ffa9bbaf58d4","canChangeBackground":false}],"id":"1f5ffe7e-bd0b-4337-8879-aa56acf001bd","root":false,"$title":"Grupo de Risco SIM Pre Diagnostico (Servico)","$position":{"top":"349px","left":"1051px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}